<div class="page-wrapper">
  <h1 class="section-title">ðŸ“Š Reporte de Consumo</h1>

  <div class="table-container">
    <h2>Filtros de Reporte</h2>

    <!-- FILTROS -->
    <div class="filtros">
      
      <div class="filtro-item">
        <mat-form-field appearance="outline">
          <mat-label>Producto:</mat-label>
          <mat-select [(ngModel)]="filtro.producto">
            <mat-option value="">Todos</mat-option>
            <mat-option value="Producto 1">Producto 1</mat-option>
            <mat-option value="Producto 2">Producto 2</mat-option>
            <mat-option value="Producto 2">Producto 3</mat-option>
            <mat-option value="Producto 2">Producto 4</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="filtro-item">
        <mat-form-field appearance="outline">
          <mat-label>Lote:</mat-label>
          <mat-select [(ngModel)]="filtro.lote">
            <mat-option value="">Todos</mat-option>
            <mat-option value="Lote A">Lote 001</mat-option>
            <mat-option value="Lote B">Lote 002</mat-option>
            <mat-option value="Lote B">Lote 003</mat-option>
            <mat-option value="Lote B">Lote 004</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="filtro-item">
        <mat-form-field appearance="outline">
          <mat-label>Desde:</mat-label>
          <input matInput [matDatepicker]="picker1" [(ngModel)]="filtro.desde">
          <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
          <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>
      </div>

      <div class="filtro-item">
        <mat-form-field appearance="outline">
          <mat-label>Hasta:</mat-label>
          <input matInput [matDatepicker]="picker2" [(ngModel)]="filtro.hasta">
          <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
          <mat-datepicker #picker2></mat-datepicker>
        </mat-form-field>
      </div>
    </div>

    <!-- BOTONES -->
    <div class="add-button-container">
      <button class="btn-filtrar" (click)="generarReporte()">
        <mat-icon>filter_alt</mat-icon>Generar reporte
      </button>

      <button class="btn-limpiar" (click)="limpiarFiltros()">
        <mat-icon>cleaning_services</mat-icon>Limpiar filtros
      </button>
    </div>
  </div>

  <div class="table-container">
    <h2>Resultado del Reporte</h2>

    <!-- TABLA -->
    <div class="table-responsive">
      <table mat-table [dataSource]="dataFiltrada" class="mat-mdc-table w-100">

        <ng-container matColumnDef="fecha">
          <th mat-header-cell *matHeaderCellDef> Fecha </th>
          <td mat-cell *matCellDef="let row"> {{ row.fecha }} </td>
        </ng-container>

        <ng-container matColumnDef="producto">
          <th mat-header-cell *matHeaderCellDef> Producto </th>
          <td mat-cell *matCellDef="let row"> {{ row.producto }} </td>
        </ng-container>

        <ng-container matColumnDef="tipo">
          <th mat-header-cell *matHeaderCellDef> Tipo </th>
          <td mat-cell *matCellDef="let row"> {{ row.tipo }} </td>
        </ng-container>

        <ng-container matColumnDef="cantidad">
          <th mat-header-cell *matHeaderCellDef> Cantidad </th>
          <td mat-cell *matCellDef="let row"> {{ row.cantidad }} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>

    <!-- GRÃFICA -->
    <div class="chart-container">
      <h3 class="chart-title">GrÃ¡fica de Consumo</h3>
      <canvas id="myChart"></canvas>
    </div>

    <!-- BOTÃ“N PDF -->
    <div class="pdf-button-container">
      <button class="btn-pdf" (click)="exportarPDF()">
        <mat-icon>picture_as_pdf</mat-icon>Exportar PDF
      </button>
    </div>
  </div>
</div>
