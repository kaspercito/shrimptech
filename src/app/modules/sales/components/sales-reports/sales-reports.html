<div class="sales-reports">
  <!-- T칤tulo principal -->
  <h2>游늳 Reportes y Tendencias de Ventas</h2>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner"></div>
    <p>Generando reportes...</p>
  </div>

  <!-- Grid de gr치ficos y estad칤sticas -->
  <div *ngIf="!isLoading" class="reports-grid">
    <!-- Gr치fica de ventas mensuales -->
    <div class="chart-container main-chart">
      <div class="chart-header">
        <div class="chart-title-section">
          <span class="chart-title">Ventas Mensuales 2025</span>
          <div class="chart-stats">
            <span class="chart-stat">
              <strong>Total:</strong> {{ formatCurrency(totalSales) }}
            </span>
            <span class="chart-stat {{ getGrowthClass(growthPercentage) }}">
              <strong>Crecimiento:</strong> {{ formatPercentage(growthPercentage) }}
            </span>
          </div>
        </div>
      </div>
      
      <!-- Gr치fico de barras interactivo -->
      <div class="chart-visualization">
        <div class="bar-chart-container">
          <div class="bars">
            <div class="bar-wrapper" *ngFor="let data of chartData; let i = index">
              <div class="bar-tooltip">
                {{ getBarTooltip(monthlySales[i]) }}
              </div>
              <div class="bar" 
                   [style.height.px]="data.height"
                   [style.background]="getBarColor(data.isHigh, i)"
                   (mouseenter)="showTooltip($event, monthlySales[i])"
                   (mouseleave)="hideTooltip()">
                <span class="bar-value">{{ formatCurrency(data.sales) }}</span>
              </div>
              <span class="bar-label">{{ data.month }}</span>
            </div>
          </div>
          <div class="chart-y-axis">
            <div class="y-axis-label">Ventas ($)</div>
          </div>
        </div>
        
        <div class="chart-legend">
          <div class="legend-item">
            <span class="legend-color" style="background: #4caf50;"></span>
            <span class="legend-text">Mes destacado (>80% del m치ximo)</span>
          </div>
          <div class="legend-item">
            <span class="legend-color" style="background: hsl(200, 70%, 50%);"></span>
            <span class="legend-text">Ventas regulares</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Top 5 Clientes -->
    <div class="chart-container top-clients-card">
      <div class="chart-header">
        <div class="chart-title-section">
          <span class="chart-title">Top 5 Clientes</span>
          <div class="chart-stats">
            <span class="chart-stat highlight">
              <strong>Representan:</strong> {{ topClientsPercentage }}% de las ventas totales
            </span>
          </div>
        </div>
        <span class="chart-icon">游끥</span>
      </div>
      
      <div class="top-clients-container">
        <div class="clients-list-simple">
          <div class="client-item-simple" *ngFor="let client of topClients; let i = index">
            <div class="client-rank-simple">{{ i + 1 }}</div>
            <div class="client-name-simple">{{ client.name }}</div>
          </div>
        </div>
        
        <!-- Botones como en la imagen -->
        <div class="clients-actions">
          <div class="clients-filters">
            <button class="filter-btn" [class.active]="filterActive === 'all'" (click)="filterActive = 'all'">
              Todos los clientes
            </button>
            <button class="filter-btn" [class.active]="filterActive === '6months'" (click)="filterActive = '6months'">
              칔ltimos 6 meses
            </button>
          </div>
          <button class="export-pdf-btn" (click)="exportToPDF()">
            游늯 Exportar Reporte
          </button>
        </div>
      </div>
    </div>

    <!-- Panel de estad칤sticas r치pidas -->
    <div class="stats-container">
      <div class="stats-grid">
        <div class="stat-card highlight">
          <div class="stat-icon">游눯</div>
          <div class="stat-content">
            <span class="stat-value">{{ formatCurrency(totalSales) }}</span>
            <span class="stat-label">Ventas Totales</span>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon">游늳</div>
          <div class="stat-content">
            <span class="stat-value {{ getGrowthClass(growthPercentage) }}">
              {{ formatPercentage(growthPercentage) }}
            </span>
            <span class="stat-label">Crecimiento Anual</span>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon">游논</div>
          <div class="stat-content">
            <span class="stat-value">{{ activeCustomers }}</span>
            <span class="stat-label">Clientes Activos</span>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon">游늵</div>
          <div class="stat-content">
            <span class="stat-value">{{ topClientsPercentage }}%</span>
            <span class="stat-label">Top 5 Clientes</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>